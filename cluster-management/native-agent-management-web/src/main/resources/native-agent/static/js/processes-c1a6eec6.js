import{_ as w,d as x,r as P,o as F,a as l,b as u,e,F as B,f as C,t as y,g as f,c as D}from"./main-38ee3337.js";import{a as d}from"./axios-1e59ba81.js";const E={class:"table table-normal w-[100vw]"},k=e("thead",null,[e("tr",null,[e("th",{class:"normal-case"},"Process Name"),e("th",{class:"normal-case"},"Pid"),e("th",{class:"normal-case"},"Option"),e("th",{class:"normal-case"},[e("a",{class:"btn btn-primary btn-sm",href:"/"},"back to menu")])])],-1),N=["onClick"],I=x({__name:"Process",setup(q){const s=P([]),n=new URLSearchParams(window.location.search),c=n.get("ip"),p=n.get("httpPort"),g=n.get("wsPort"),m=async()=>{const r={operation:"findAvailableProxyAddress"};try{const t=await d.post(window.location.origin+"/api/native-agent-proxy",r);return t&&t.data?t.data:null}catch{return null}},b=async()=>{const r=await m();if(!r)return;let t="http://"+r+"/api/native-agent-proxy";const o={operation:"listProcess",agentAddress:c+":"+p};try{const a=await d.post(t,o);Array.isArray(a.data)&&s.splice(0,s.length,...a.data)}catch{}},v=async r=>{try{const t=await m();if(!t)return;let o="http://"+t+"/api/native-agent-proxy";const a={operation:"monitor",pid:r.pid,agentAddress:c+":"+p},i=await d.post(o,a);if(i.status!==200)alert("attach\u5931\u8D25");else if(i.data===-1)alert("attach\u5931\u8D25\uFF0C\u7AEF\u53E38563\u88AB\u5176\u4ED6\u8FDB\u7A0B\u5360\u7528");else{const h=t.split(":"),A=h[0],_=h[1];window.location.href=`console.html?ip=${A}&port=${_}&nativeAgentAddress=${c+":"+g}`}}catch{alert("\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u7A0D\u540E\u518D\u8BD5\u3002")}};return F(()=>{b()}),(r,t)=>(l(),u("table",E,[k,e("tbody",null,[(l(!0),u(B,null,C(s,(o,a)=>(l(),u("tr",{key:a,class:"hover"},[e("td",null,y(o.processName),1),e("td",null,y(o.pid),1),e("td",null,[f(' <button @click="attachJavaProcess(javaProcessInfoRecord, index)" class="btn btn-primary btn-sm">Attach</button> '),f(' <a class="btn btn-primary btn-sm" :href="generateMonitorLink(javaProcessInfoRecord)">monitor</a> '),e("a",{class:"btn btn-primary btn-sm",onClick:i=>v(o)},"monitor",8,N)])]))),128))])]))}});var L=w(I,[["__file","D:/code/java/read/arthas/web-ui/arthasWebConsole/all/native-agent/src/Process.vue"]]);const $=D(L);$.mount("#app");
