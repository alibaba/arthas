import{_ as n,o,c as r,a as t,b as s,e,d as i,r as d}from"./app.820675a4.js";const c={},l=t("h1",{id:"arthas-mcp-server",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#arthas-mcp-server","aria-hidden":"true"},"#"),e(" Arthas MCP Server")],-1),p=t("h2",{id:"overview",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#overview","aria-hidden":"true"},"#"),e(" Overview")],-1),u=e("Arthas MCP Server is an experimental module of Arthas that implements a server based on the "),h={href:"https://modelcontextprotocol.io/",target:"_blank",rel:"noopener noreferrer"},m=e("MCP (Model Context Protocol)"),g=e(". This module provides a unified JSON-RPC 2.0 interface through HTTP/Netty, enabling AI assistants to execute Arthas diagnostic commands via tool calls."),v=i(`<p>MCP (Model Context Protocol) is a standardized protocol proposed by Anthropic for connecting AI assistants with various tools and data sources. Through Arthas MCP Server, AI assistants can naturally execute Java application diagnostic tasks, significantly improving development and operations efficiency.</p><h3 id="key-features" tabindex="-1"><a class="header-anchor" href="#key-features" aria-hidden="true">#</a> Key Features</h3><ul><li><strong>AI-Native Integration</strong>: Supports mainstream AI clients (Claude Desktop, Cherry Studio, Cline, etc.)</li><li><strong>Standardized Protocol</strong>: Full implementation of MCP protocol specification (version 2025-03-26), supporting Streamable Http transport</li><li><strong>26 Diagnostic Tools</strong>: Covers core functionalities including JVM monitoring, class loading, method tracing, etc.</li><li><strong>Security Authentication</strong>: Supports Bearer Token authentication mechanism</li></ul><h2 id="supported-diagnostic-tools" tabindex="-1"><a class="header-anchor" href="#supported-diagnostic-tools" aria-hidden="true">#</a> Supported Diagnostic Tools</h2><p>Arthas MCP Server integrates 26 core diagnostic tools, categorized by functionality:</p><h3 id="jvm-related-tools-12" tabindex="-1"><a class="header-anchor" href="#jvm-related-tools-12" aria-hidden="true">#</a> JVM-Related Tools (12)</h3><table><thead><tr><th>Tool</th><th>Description</th></tr></thead><tbody><tr><td><strong>dashboard</strong></td><td>Real-time JVM/application dashboard with customizable refresh interval and count control</td></tr><tr><td><strong>heapdump</strong></td><td>Generate JVM heap dump file, supports <code>--live</code> option to export only live objects</td></tr><tr><td><strong>jvm</strong></td><td>View current JVM detailed information</td></tr><tr><td><strong>mbean</strong></td><td>View or monitor MBean attributes, supports real-time refresh and pattern matching</td></tr><tr><td><strong>memory</strong></td><td>View JVM memory information</td></tr><tr><td><strong>thread</strong></td><td>View thread information and stack traces, supports finding blocked and busiest threads</td></tr><tr><td><strong>sysprop</strong></td><td>View or modify system properties, supports dynamic JVM system property modification</td></tr><tr><td><strong>sysenv</strong></td><td>View system environment variables</td></tr><tr><td><strong>vmoption</strong></td><td>View or update VM options, supports dynamic JVM parameter adjustment</td></tr><tr><td><strong>perfcounter</strong></td><td>View Perf Counter information, displays JVM performance counters</td></tr><tr><td><strong>vmtool</strong></td><td>VM tool collection, supports forced GC, instance retrieval, thread interruption, etc.</td></tr><tr><td><strong>getstatic</strong></td><td>View static field values of a class</td></tr><tr><td><strong>ognl</strong></td><td>Execute OGNL expressions, dynamically invoke methods and access fields</td></tr></tbody></table><h3 id="class-classloader-tools-8" tabindex="-1"><a class="header-anchor" href="#class-classloader-tools-8" aria-hidden="true">#</a> Class/ClassLoader Tools (8)</h3><table><thead><tr><th>Tool</th><th>Description</th></tr></thead><tbody><tr><td><strong>sc</strong></td><td>View loaded class information in JVM, supports detailed info and statistics</td></tr><tr><td><strong>sm</strong></td><td>View method information of loaded classes, displays method signatures and modifiers</td></tr><tr><td><strong>jad</strong></td><td>Decompile loaded class source code, converts bytecode to Java code</td></tr><tr><td><strong>classloader</strong></td><td>ClassLoader diagnostic tool, view classloader statistics, hierarchy tree, URLs</td></tr><tr><td><strong>mc</strong></td><td>Memory compiler, compiles Java source code to bytecode files</td></tr><tr><td><strong>redefine</strong></td><td>Redefine classes, load external class files to redefine classes in JVM</td></tr><tr><td><strong>retransform</strong></td><td>Retransform classes, triggers class retransformation and bytecode enhancement</td></tr><tr><td><strong>dump</strong></td><td>Dump actual running class bytecode from JVM to specified directory</td></tr></tbody></table><h3 id="monitoring-and-diagnostic-tools-6" tabindex="-1"><a class="header-anchor" href="#monitoring-and-diagnostic-tools-6" aria-hidden="true">#</a> Monitoring and Diagnostic Tools (6)</h3><table><thead><tr><th>Tool</th><th>Description</th></tr></thead><tbody><tr><td><strong>monitor</strong></td><td>Monitor invocation of specified methods in real-time</td></tr><tr><td><strong>stack</strong></td><td>Output call path of current method, helps analyze method call chains</td></tr><tr><td><strong>trace</strong></td><td>Trace internal method call paths, output time cost for each node</td></tr><tr><td><strong>tt</strong></td><td>Time tunnel for method execution data, records parameters and return values for each invocation</td></tr><tr><td><strong>watch</strong></td><td>Observe method invocations including parameters, return values, and exceptions</td></tr></tbody></table><h2 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start" aria-hidden="true">#</a> Quick Start</h2><h3 id="_1-configure-mcp-service" tabindex="-1"><a class="header-anchor" href="#_1-configure-mcp-service" aria-hidden="true">#</a> 1. Configure MCP Service</h3><p>Enable MCP service in <code>arthas.properties</code> configuration file:</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># MCP (Model Context Protocol) configuration</span>
<span class="token key attr-name">arthas.mcpEndpoint</span><span class="token punctuation">=</span><span class="token value attr-value">/mcp</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-start-application" tabindex="-1"><a class="header-anchor" href="#_2-start-application" aria-hidden="true">#</a> 2. Start Application</h3><p>Start Arthas or Java application with Arthas normally. By default, MCP service will be exposed on HTTP port 8563.</p><p>Verify MCP service is running:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> http://localhost:8563/mcp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>If MCP protocol information is returned, the service has started successfully.</p><h3 id="_3-configure-ai-client" tabindex="-1"><a class="header-anchor" href="#_3-configure-ai-client" aria-hidden="true">#</a> 3. Configure AI Client</h3><p>Configuration examples for mainstream AI clients:</p><h4 id="cherry-studio-cline" tabindex="-1"><a class="header-anchor" href="#cherry-studio-cline" aria-hidden="true">#</a> Cherry Studio / Cline</h4><p>Add MCP server configuration in settings:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;mcpServers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;arthas-mcp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;streamableHttp&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8563/mcp&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h2><h3 id="arthas-configuration" tabindex="-1"><a class="header-anchor" href="#arthas-configuration" aria-hidden="true">#</a> Arthas Configuration</h3><table><thead><tr><th>Property</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>arthas.mcpEndpoint</code></td><td>MCP service access path</td><td>None (requires manual configuration)</td></tr><tr><td><code>arthas.httpPort</code></td><td>HTTP service port</td><td>8563</td></tr><tr><td><code>arthas.password</code></td><td>Authentication password (when authentication enabled)</td><td>None</td></tr></tbody></table><h3 id="authentication-configuration" tabindex="-1"><a class="header-anchor" href="#authentication-configuration" aria-hidden="true">#</a> Authentication Configuration</h3><p>When <code>arthas.password</code> is configured in the configuration file, MCP Server will automatically enable authentication. In this case, you need to add an authentication header in the AI client configuration, with the Bearer Token set to the configured password value.</p><p>Configuration file example (<code>arthas.properties</code>):</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">arthas.password</span><span class="token punctuation">=</span><span class="token value attr-value">your-secure-password</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>AI client configuration example:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;mcpServers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;arthas-mcp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;streamableHttp&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:8563/mcp&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;headers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Authorization&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bearer your-secure-password&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p><strong>Note</strong>: The token in the Authorization header must exactly match the value configured in <code>arthas.password</code>.</p></div><h2 id="feedback-contribution" tabindex="-1"><a class="header-anchor" href="#feedback-contribution" aria-hidden="true">#</a> Feedback &amp; Contribution</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Arthas MCP Server is an experimental feature. Feedback and suggestions are welcome!</p></div>`,37),f=t("strong",null,"Issue Report",-1),b=e(": "),k={href:"https://github.com/alibaba/arthas/issues",target:"_blank",rel:"noopener noreferrer"},y=e("GitHub Issues"),_=t("strong",null,"Feature Request",-1),x=e(": "),C={href:"https://github.com/alibaba/arthas/discussions",target:"_blank",rel:"noopener noreferrer"},M=e("GitHub Discussions"),q=t("strong",null,"Contribute",-1),w=e(": "),V={href:"https://github.com/alibaba/arthas/blob/master/CONTRIBUTING.md",target:"_blank",rel:"noopener noreferrer"},P=e("Contributing Guide");function A(T,S){const a=d("ExternalLinkIcon");return o(),r("div",null,[l,p,t("p",null,[u,t("a",h,[m,s(a)]),g]),v,t("ul",null,[t("li",null,[f,b,t("a",k,[y,s(a)])]),t("li",null,[_,x,t("a",C,[M,s(a)])]),t("li",null,[q,w,t("a",V,[P,s(a)])])])])}const J=n(c,[["render",A],["__file","mcp-server.html.vue"]]);export{J as default};
