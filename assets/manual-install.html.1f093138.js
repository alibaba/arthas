import{_ as i,o as l,c as r,a,b as t,e,d as s,r as d}from"./app.1e03d722.js";const c={},o=a("h1",{id:"\u624B\u52A8\u5B89\u88C5-arthas",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#\u624B\u52A8\u5B89\u88C5-arthas","aria-hidden":"true"},"#"),e(" \u624B\u52A8\u5B89\u88C5 Arthas")],-1),p=a("p",null,"\u4E0B\u8F7D\u6700\u65B0\u7248\u672C",-1),h=a("strong",null,"\u6700\u65B0\u7248\u672C\uFF0C\u70B9\u51FB\u4E0B\u8F7D",-1),u=e("\uFF1A"),v={href:"https://arthas.aliyun.com/download/latest_version?mirror=aliyun",target:"_blank",rel:"noopener noreferrer"},m=a("img",{src:"https://img.shields.io/maven-central/v/com.taobao.arthas/arthas-packaging.svg?style=flat-square",alt:"",title:"Arthas"},null,-1),b=s(`<li><p>\u89E3\u538B\u7F29 arthas \u7684\u538B\u7F29\u5305</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>unzip arthas-packaging-bin.zip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u5B89\u88C5 Arthas</p><p>\u5B89\u88C5\u4E4B\u524D\u6700\u597D\u628A\u6240\u6709\u8001\u7248\u672C\u7684 Arthas \u5168\u90FD\u5220\u6389</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo su admin
rm -rf /home/admin/.arthas/lib/*
cd arthas
./install-local.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p><p>\u6CE8\u610F\uFF0C\u8FD9\u91CC\u6839\u636E\u4F60\u9700\u8981\u8BCA\u65AD\u7684 Java \u8FDB\u7A0B\u7684\u6240\u5C5E\u7528\u6237\u8FDB\u884C\u5207\u6362</p></div></li><li><p>\u542F\u52A8 Arthas</p><p>\u542F\u52A8\u4E4B\u524D\uFF0C\u8BF7\u786E\u4FDD\u8001\u7248\u672C\u7684 Arthas \u5DF2\u7ECF<code>stop</code>.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>./as.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,3),g=s(`<h2 id="\u4EE5\u811A\u672C\u7684\u65B9\u5F0F\u542F\u52A8-as-sh-as-bat" tabindex="-1"><a class="header-anchor" href="#\u4EE5\u811A\u672C\u7684\u65B9\u5F0F\u542F\u52A8-as-sh-as-bat" aria-hidden="true">#</a> \u4EE5\u811A\u672C\u7684\u65B9\u5F0F\u542F\u52A8 as.sh/as.bat</h2><h3 id="linux-unix-mac" tabindex="-1"><a class="header-anchor" href="#linux-unix-mac" aria-hidden="true">#</a> Linux/Unix/Mac</h3><p>Arthas \u652F\u6301\u5728 Linux/Unix/Mac \u7B49\u5E73\u53F0\u4E0A\u4E00\u952E\u5B89\u88C5\uFF0C\u8BF7\u590D\u5236\u4EE5\u4E0B\u5185\u5BB9\uFF0C\u5E76\u7C98\u8D34\u5230\u547D\u4EE4\u884C\u4E2D\uFF0C\u6572 <code>\u56DE\u8F66</code> \u6267\u884C\u5373\u53EF\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-L</span> https://arthas.aliyun.com/install.sh <span class="token operator">|</span> <span class="token function">sh</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0A\u8FF0\u547D\u4EE4\u4F1A\u4E0B\u8F7D\u542F\u52A8\u811A\u672C\u6587\u4EF6 <code>as.sh</code> \u5230\u5F53\u524D\u76EE\u5F55\uFF0C\u4F60\u53EF\u4EE5\u653E\u5728\u4EFB\u4F55\u5730\u65B9\u6216\u5C06\u5176\u52A0\u5165\u5230 <code>$PATH</code> \u4E2D\u3002</p><p>\u76F4\u63A5\u5728 shell \u4E0B\u9762\u6267\u884C<code>./as.sh</code>\uFF0C\u5C31\u4F1A\u8FDB\u5165\u4EA4\u4E92\u754C\u9762\u3002</p><p>\u4E5F\u53EF\u4EE5\u6267\u884C<code>./as.sh -h</code>\u6765\u83B7\u53D6\u66F4\u591A\u53C2\u6570\u4FE1\u606F\u3002</p><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows" aria-hidden="true">#</a> Windows</h3>`,8),x=e("\u6700\u65B0\u7248\u672C\uFF0C\u70B9\u51FB\u4E0B\u8F7D\uFF1A"),_={href:"https://arthas.aliyun.com/download/latest_version?mirror=aliyun",target:"_blank",rel:"noopener noreferrer"},k=a("img",{src:"https://img.shields.io/maven-central/v/com.taobao.arthas/arthas-packaging.svg?style=flat-square",alt:"",title:"Arthas"},null,-1),j=s(`<p>\u4E0B\u8F7D\u89E3\u538B\u540E\u5728 bin \u76EE\u5F55\u6709 <code>as.bat</code>\u3002\u6B64\u811A\u672C\u6682\u65F6\u53EA\u63A5\u53D7\u4E00\u4E2A\u53C2\u6570 pid\uFF0C\u5373\u53EA\u80FD\u8BCA\u65AD\u672C\u673A\u4E0A\u7684 Java \u8FDB\u7A0B\u3002\uFF08\u6B22\u8FCE\u7CBE\u901A bat \u811A\u672C\u7684\u5F00\u53D1\u8005\u6539\u8FDB\uFF09</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>as.bat &lt;pid&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u8BCA\u65AD windows \u670D\u52A1\u6A21\u5F0F\u8FD0\u884C\u7684 Java \u8FDB\u7A0B (--interact \u6253\u5F00\u670D\u52A1 UI \u4EA4\u4E92\u6A21\u5F0F\uFF0C\u65B9\u4FBF\u8BCA\u65AD\u95EE\u9898)\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>as-service.bat -port &lt;port&gt;
as-service.bat -pid &lt;pid&gt;
as-service.bat -pid &lt;pid&gt; --interact
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6E05\u7406 arthas windows \u670D\u52A1\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>as-service.bat -remove
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u624B\u52A8\u62FC\u63A5\u547D\u4EE4\u884C\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#\u624B\u52A8\u62FC\u63A5\u547D\u4EE4\u884C\u542F\u52A8" aria-hidden="true">#</a> \u624B\u52A8\u62FC\u63A5\u547D\u4EE4\u884C\u542F\u52A8</h2><p>\u5982\u679C\u542F\u52A8\u9047\u5230\u95EE\u9898\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u624B\u52A8\u62FC\u63A5\u51FA\u547D\u4EE4\u884C\u53C2\u6570\u6765\u542F\u52A8\u3002</p><ol><li><p>\u67E5\u627E\u76EE\u5F55 jvm \u7684 java \u6587\u4EF6\u8DEF\u5F84\u3002</p><p>\u5728 linux/mac \u4E0A\u6267\u884C<code>ps aux | grep java</code>\uFF0C\u5728 windows \u4E0A\u53EF\u4EE5\u901A\u8FC7\u8FDB\u7A0B\u7BA1\u7406\u5668\u6765\u67E5\u770B\u3002\u5047\u8BBE\u662F<code>/opt/jdk1.8/bin/java</code>\u3002</p></li><li><p>\u62FC\u63A5\u51FA\u547D\u4EE4\u884C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>/opt/jdk1.8/bin/java -Xbootclasspath/a:/opt/jdk1.8/lib/tools.jar <span class="token punctuation">\\</span>
 <span class="token parameter variable">-jar</span> /tmp/arthas-packaging/arthas-core.jar <span class="token punctuation">\\</span>
 <span class="token parameter variable">-pid</span> <span class="token number">15146</span> <span class="token punctuation">\\</span>
 -target-ip <span class="token number">127.0</span>.0.1 -telnet-port <span class="token number">3658</span> -http-port <span class="token number">8563</span> <span class="token punctuation">\\</span>
 <span class="token parameter variable">-core</span> /tmp/arthas-packaging/arthas-core.jar <span class="token punctuation">\\</span>
 <span class="token parameter variable">-agent</span> /tmp/arthas-packaging/arthas/arthas-agent.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u547D\u4EE4\u884C\u5206\u51E0\u90E8\u5206\u7EC4\u6210\uFF1A</p><ul><li><code>-Xbootclasspath</code> \u589E\u52A0 tools.jar</li><li><code>-jar /tmp/arthas-packaging/arthas-core.jar</code> \u6307\u5B9A main \u51FD\u6570\u5165\u53E3</li><li><code>-pid 15146</code> \u6307\u5B9A\u76EE\u6807 java \u8FDB\u7A0B ID</li><li><code>-target-ip 127.0.0.1</code> \u6307\u5B9A IP</li><li><code>-telnet-port 3658 -http-port 8563</code> \u6307\u5B9A telnet \u548C http \u7AEF\u53E3</li><li><code>-core /tmp/arthas-packaging/arthas-core.jar -agent /tmp/arthas-packaging/arthas/arthas-agent.jar</code> \u6307\u5B9A core/agent jar \u5305</li></ul><p>\u5982\u679C\u662F<code>jdk &gt; 9</code>\uFF0C\u5373 9/10/11 \u4EE5\u4E0A\u7684\u7248\u672C\uFF0C\u4E0D\u9700\u8981\u6307\u5B9A<code>tools.jar</code>\uFF0C\u76F4\u63A5\u53BB\u6389<code>-Xbootclasspath</code> \u7684\u914D\u7F6E\u5373\u53EF\u3002</p><p>\u542F\u52A8\u76EE\u5FD7\u8F93\u51FA\u5728<code>~/logs/arthas/arthas.log</code>\u91CC\u3002</p></li><li><p>attach \u6210\u529F\u4E4B\u540E\uFF0C\u4F7F\u7528 telnet \u8FDE\u63A5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>telnet <span class="token number">127.0</span>.0.1 <span class="token number">3658</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol>`,9);function f(w,A){const n=d("ExternalLinkIcon");return l(),r("div",null,[o,a("ol",null,[a("li",null,[p,a("p",null,[h,u,a("a",v,[m,t(n)])])]),b]),g,a("p",null,[x,a("a",_,[k,t(n)])]),j])}const I=i(c,[["render",f],["__file","manual-install.html.vue"]]);export{I as default};
