"use strict";(self["webpackChunkgrpc_web_demo"]=self["webpackChunkgrpc_web_demo"]||[]).push([[897],{8897:function(e,t,l){l.r(t),l.d(t,{default:function(){return v}});var a=l(3396),s=l(7139);const n=e=>((0,a.dD)("data-v-d966b752"),e=e(),(0,a.Cn)(),e),o={style:{"text-align":"center"}},d=n((()=>(0,a._)("h3",null,"JobId",-1))),y=(0,a.Uk)("查询"),u=n((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"序号"),(0,a._)("th",null,"操作"),(0,a._)("th",null,"key"),(0,a._)("th",null,"value")])],-1))),i=(0,a.Uk)("修改");function p(e,t,l,n,p,r){const m=(0,a.up)("Card"),g=(0,a.up)("Col"),h=(0,a.up)("Input"),c=(0,a.up)("FormItem"),v=(0,a.up)("Button"),w=(0,a.up)("Form"),k=(0,a.up)("Row"),_=(0,a.up)("Modal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{span:"5"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{style:{width:"300px"}},{default:(0,a.w5)((()=>[(0,a._)("div",o,[d,(0,a._)("h3",null,(0,s.zw)(p.jobId),1)])])),_:1})])),_:1}),(0,a.Wm)(g,{span:"19"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{model:p.sysGetByKeyModel,"label-width":150,style:{"margin-top":"20px","justify-content":"center"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"key"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:p.sysGetByKeyModel.key,"onUpdate:modelValue":t[0]||(t[0]=e=>p.sysGetByKeyModel.key=e),placeholder:"Enter key..."},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"value"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{disabled:"",modelValue:p.sysGetByKeyModel.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.sysGetByKeyModel.value=e),placeholder:"result value..."},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{type:"primary",onClick:t[2]||(t[2]=e=>r.getByKey())},{default:(0,a.w5)((()=>[y])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1}),(0,a._)("table",null,[u,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.tableData,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,s.zw)(e.index),1),(0,a._)("td",null,[(0,a.Wm)(v,{type:"primary",onClick:t=>r.handleClick(e)},{default:(0,a.w5)((()=>[i])),_:2},1032,["onClick"])]),(0,a._)("td",null,(0,s.zw)(e.key),1),(0,a._)("td",null,(0,s.zw)(e.value),1)])))),128))]),(0,a.Wm)(_,{modelValue:p.modal,"onUpdate:modelValue":t[4]||(t[4]=e=>p.modal=e),title:"修改",onOnOk:r.sysUpdteByKey,onOnCancel:r.modalCancel},{default:(0,a.w5)((()=>[(0,a.Uk)(" key: "+(0,s.zw)(p.sysUpdateModel.key)+" ",1),(0,a.Wm)(h,{modelValue:p.sysUpdateModel.value,"onUpdate:modelValue":t[3]||(t[3]=e=>p.sysUpdateModel.value=e),placeholder:"Enter new value..."},null,8,["modelValue"])])),_:1},8,["modelValue","onOnOk","onOnCancel"])])],64)}l(7658);var r=l(3378),m=l(1527),g={name:"pwd",inject:["apiHost"],data(){return{sysPropClient:null,jobId:0,sysPropResponse:"www",tableData:[],sysGetByKeyModel:{key:"",value:""},modal:!1,sysUpdateModel:{key:"",value:""}}},created(){let e=this.apiHost;this.sysPropClient=new r.SystemPropertyClient(e),this.sendSysPropRequest(),this.metadata={"Content-Type":"application/grpc-web-text"}},methods:{modalCancel(){this.modal=!1},handleClick(e){this.modal=!0,this.sysUpdateModel.key=e.key,this.sysUpdateModel.value=e.value,console.log(e)},sysUpdteByKey(){var e=new r.StringStringMapValue;e.getStringstringmapMap().set(this.sysUpdateModel.key,this.sysUpdateModel.value);const t=this;this.sysPropClient.update(e,{},((e,l)=>{if(e)console.error(e);else{t.jobId=l.getJobid();const e=l.getType();if("sysprop"==e&&l.hasStringstringmapvalue()){var a=l.getStringstringmapvalue(),s=a.getStringstringmapMap().get(this.sysUpdateModel.key);t.sysUpdateModel.value==s&&(this.$Notice.open({title:"修改成功",desc:this.sysUpdateModel.key+"  成功修改为: "+this.sysUpdateModel.value}),t.sendSysPropRequest(),t.modal=!1)}}}))},getByKey(){var e=new r.StringKey;this.sysGetByKeyModel.key=this.sysGetByKeyModel.key.trim(),e.setKey(this.sysGetByKeyModel.key);const t=this;this.sysPropClient.getByKey(e,{},((e,l)=>{if(e)console.error(e);else{t.jobId=l.getJobid();const e=l.getType();if("sysprop"==e&&l.hasStringstringmapvalue()){var a=l.getStringstringmapvalue();t.sysGetByKeyModel.value=a.getStringstringmapMap().get(this.sysGetByKeyModel.key)}}}))},sendSysPropRequest(){var e=new m.Empty;this.tableData=[];const t=this;this.sysPropClient.get(e,{},((e,l)=>{if(e)console.error(e);else{t.jobId=l.getJobid();const e=l.getType();if("sysprop"==e&&l.hasStringstringmapvalue()){var a=l.getStringstringmapvalue(),s=a.getStringstringmapMap(),n=1;s.forEach(((e,l)=>{var a={};a["index"]=n,a["key"]=l,a["value"]=e,t.tableData.push(a),n+=1}))}}}))}}},h=l(89);const c=(0,h.Z)(g,[["render",p],["__scopeId","data-v-d966b752"]]);var v=c}}]);
//# sourceMappingURL=897.ca2a774d.js.map